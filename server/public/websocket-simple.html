<!DOCTYPE html>
<html>
	<head>

	</head>
	<body>
		<script>
			let webSocket = new WebSocket(`ws://local.thermosmart:7000/websocket/sensor/7?apiKey=3t3ferf43gfe4f`);
			webSocket.onmessage = function(m) {
				console.log(m);

				if (m.data === '2') {
					webSocket.send('3');
				}
			};
			webSocket.onopen = function (e) {
				console.log('opened');
				webSocket.send("2probe");

				setTimeout(() => {
					webSocket.send('5');
				}, 3000);

				// setInterval(() => {
				// 	webSocket.send('3');
				// }, 5000);
			}
			webSocket.onerror = function(error) {
				console.log(error);
			};
			webSocket.onclose = function(event) {
				if (event.wasClean) {
					console.log(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
				} else {
				// e.g. server process killed or network down
				// event.code is usually 1006 in this case
					console.log('[close] Connection died');
				}
			};
		</script>
	</body>
</html>
